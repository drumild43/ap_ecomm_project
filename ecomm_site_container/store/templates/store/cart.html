{% extends "store/base.html" %}
{% load static %}
{% block content %}


    <div class="Cart-Container" style="margin-top: 7rem;">
      <div class="Header3" style="padding-bottom: 0.7rem;border-bottom: 4px solid #fc7c7c;padding-top: 0.7rem;">
        <h3 class="Heading" style="font-size: 1.2em;">Your Cart</h3>
        <form action="{% url 'store:cart' curr_user.id %}" method="post" style="padding: 0;">
          {% csrf_token %}
          <button type="submit" name="update-method" value="remove-all" style="margin-top: 0; padding: 1rem 2.5rem; font-size: 1rem;">
            Remove All
          </button>
        </form>
      </div>
      
      {% for cartitem in cart.cartitem_set.all %}
      <div class="Cartitems">
        <div class="imgb">
          <img src="./images/tp4.png"/>
        </div>
        <div class="itom">
          <!--try reducing code by defining str for product, category-->
          <h1 class="Name">{{ cartitem.product.name }}</h1>
          <h3 class="Description">{{ cartitem.product.category.name }}&nbsp;&nbsp; Size: {{ cartitem.size }}</h3>
        </div>
          
        <div class="Amount">
          <form id="ci-form" action="{% url 'store:update-cartitem' curr_user.id cartitem.id %}" method="post">
            {% csrf_token %}
            <button type="submit" name="update-method" value="decrease">-</button>
          </form>
          
          <input type="text" value="1" readonly>
            
          <form action="{% url 'store:update-cartitem' curr_user.id cartitem.id %}" method="post">
            {% csrf_token %}
            <button type="submit" name="update-method" value="increase">+</button>
          </form>
        </div>
        
        <div class="prices">
          <div class="price">{{ cartitem.product.price }}</div>
          
          <form action="{% url 'store:update-cartitem' curr_user.id cartitem.id %}" method="post">
            <button type="submit" name="update-method" value="move-to-wl">Move to Wishlist</button>
          </form>
        </div>

          <div class="remove">
            <button form="ci-form" type="submit" name="update-method" value="remove">Remove</button>
          </div>
        </div>
      </div>

      {% empty %}
      <h2 style="padding-left: 3rem; margin-top: 0.7rem;">Your cart is empty.</h2>

      {% endfor %}
      
      <div class="tp">
        <table>
          <tr>
            <td>Subtotal</td>
            <td>{{ cart_subtotal }}</td>
          </tr>
          <tr>
            <td>Items</td>
            <td>{{ cart.total_quantity }}</td>
          </tr>
        </table>
        
        <a href="{% url 'store:checkout' curr_user.id %}" class="check-button" style="width: 27%; height: fit-content; font-size: 1.5rem; margin: 0.7rem 2rem; padding: 0.5rem;">
          Proceed To Checkout
        </a>
      </div>
    </div>
    
{% endblock content %}    